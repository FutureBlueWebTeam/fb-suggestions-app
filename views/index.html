<!DOCTYPE html>
<html lang="en" ng-app="fb-suggestions-app" ng-controller="MapCtrl">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.6/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.6/angular-route.min.js"></script>

	<link rel="stylesheet" href="style.css">
	<script src="../js/app.js"></script>
	<script src="http://maps.googleapis.com/maps/api/js?key=&sensor=false&extension=.js"></script>
</head>

<body>
	<div>
		<div class="fluid-container">
			<h1 class="center text-center" style="color: #1E90FF;"> Future Blue Suggestion App</h1>
			<!-- Search bar -->
			<div class="search-content cf row">
				<div class="search-wrapper">
					<div class="search-field">
						<input type="text" id="search-bar" placeholder="Search for an event" required>
					</div>
					<button type="button" id="search-button">Search</button>
				</div>
			</div>

		</div>
		<div class="center-block">
			<div id="map" class="center-block center" ng-style="{'width': winWidth(), 'height': winHeight()-100}"></div>
			<!-- <div id="class" ng-repeat="marker in markers | orderBy : 'title'" class="text-center">
				<a href="#" ng-click="openInfoWindow($event, marker)">{{marker.title}}</a>
				<br />
				</div> -->
		</div>
	</div>
	<script type="text/javascript">
		// Placeholder until the checkbox is implemented to retrieve what categories are being searched for
		var categories = [
			'event',
			'food'
		];

		window.onload = function() {


			// When search button pressed call search
			document.getElementById("search-button").onclick = submitSearch;

			// When search input submitted call search
			document.getElementById("search-bar").onkeyup = onChangeSearch;
		}

		/**
		 * Search the data in app.js for names matching the search term falling in the appropriate categories specified by the checkbox under the search bar
		 * @return {void} void
		 */
		function submitSearch() {
			console.log("submitSearch: " + getSearchValue());
			var matches = [];
			// This isn't working must change this to a normal for loop or figure out for each properly
			for (var i = 0; i < places.length; i++) {
				if (categories.indexOf(places[i].category) >= 0 &&
					(places[i].name.toLowerCase().indexOf(getSearchValue().toLowerCase()) != -1)) {
					console.log("Found the entry:\nName:" + places[i].name + "\nCategory:" + places[i].category);
				}
			}
		}

		/**
		 * When enter is pressed submit the input, leaves room to also perform searches during a users typing to provide content assist in the future
		 * @return {void} void
		 */
		function onChangeSearch() {
			var ENTER = 13;
			if (event.keyCode == ENTER) {
				submitSearch();
				return;
			}
			//console.log("onChangeSearch");
		}

		/**
		 * Get the value in the search bar
		 * @return {String} value in search bar
		 */
		function getSearchValue() {
			return document.getElementById("search-bar").value;
		}
	</script>
	<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script> -->
</body>

</html>
